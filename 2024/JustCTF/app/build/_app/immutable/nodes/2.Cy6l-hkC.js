import{s as le,n as Y,r as se,f as ie,e as oe,o as re,h as Q}from"../chunks/scheduler.DNLc2kpi.js";import{S as ae,i as ne,e as v,s as P,o as A,c as m,j as V,h,b as S,g as M,q as R,k as c,f as D,l as f,u as H,m as j,r as K,t as G,n as J,v as ce,w as ue,x as fe,y as de,z as he,A as pe,B as ve}from"../chunks/index.DtWLoelg.js";import{p as U}from"../chunks/index.D3UwJtMw.js";function X(r){return(r==null?void 0:r.length)!==void 0?r:Array.from(r)}function Z(r){let e,l=r[2][0].name+"",s;return{c(){e=v("span"),s=A(l),this.h()},l(a){e=m(a,"SPAN",{class:!0});var o=V(e);s=R(o,l),o.forEach(h),this.h()},h(){c(e,"class","file-name")},m(a,o){D(a,e,o),f(e,s)},p(a,o){o&4&&l!==(l=a[2][0].name+"")&&K(s,l)},d(a){a&&h(e)}}}function me(r){var O;let e,l,s,a,o,t,d,p,g,_,k='<span class="file-icon"><i class="fas fa-upload"></i></span> <span class="file-label">Choose a fileâ€¦</span>',C,u,n,i,T,y,L,E,b=((O=r[2])==null?void 0:O.length)>0&&Z(r);return{c(){e=v("div"),l=v("div"),s=v("div"),a=v("input"),o=P(),t=v("div"),d=v("label"),p=v("input"),g=P(),_=v("span"),_.innerHTML=k,C=P(),b&&b.c(),n=P(),i=v("button"),T=A("create plant"),this.h()},l(I){e=m(I,"DIV",{class:!0});var w=V(e);l=m(w,"DIV",{class:!0});var N=V(l);s=m(N,"DIV",{class:!0});var q=V(s);a=m(q,"INPUT",{class:!0,type:!0,placeholder:!0}),q.forEach(h),N.forEach(h),o=S(w),t=m(w,"DIV",{class:!0});var F=V(t);d=m(F,"LABEL",{class:!0});var B=V(d);p=m(B,"INPUT",{class:!0,type:!0,name:!0}),g=S(B),_=m(B,"SPAN",{class:!0,"data-svelte-h":!0}),M(_)!=="svelte-15gnmgi"&&(_.innerHTML=k),C=S(B),b&&b.l(B),B.forEach(h),F.forEach(h),n=S(w),i=m(w,"BUTTON",{class:!0});var W=V(i);T=R(W,"create plant"),W.forEach(h),w.forEach(h),this.h()},h(){var I;c(a,"class","input"),c(a,"type","text"),c(a,"placeholder","plant title"),a.disabled=r[0],c(s,"class","control"),c(l,"class","field"),c(p,"class","file-input"),c(p,"type","file"),c(p,"name","img"),p.disabled=r[0],c(_,"class","file-cta"),c(d,"class","file-label"),c(t,"class",u=`file ${((I=r[2])==null?void 0:I.length)>0?"has-name":""}`),c(i,"class",y=`button is-primary ${r[0]?"is-loading":""}`),c(e,"class","box")},m(I,w){D(I,e,w),f(e,l),f(l,s),f(s,a),H(a,r[1]),f(e,o),f(e,t),f(t,d),f(d,p),f(d,g),f(d,_),f(d,C),b&&b.m(d,null),f(e,n),f(e,i),f(i,T),L||(E=[j(a,"input",r[4]),j(p,"change",r[5]),j(i,"click",r[3])],L=!0)},p(I,[w]){var N,q;w&1&&(a.disabled=I[0]),w&2&&a.value!==I[1]&&H(a,I[1]),w&1&&(p.disabled=I[0]),((N=I[2])==null?void 0:N.length)>0?b?b.p(I,w):(b=Z(I),b.c(),b.m(d,null)):b&&(b.d(1),b=null),w&4&&u!==(u=`file ${((q=I[2])==null?void 0:q.length)>0?"has-name":""}`)&&c(t,"class",u),w&1&&y!==(y=`button is-primary ${I[0]?"is-loading":""}`)&&c(i,"class",y)},i:Y,o:Y,d(I){I&&h(e),b&&b.d(),L=!1,se(E)}}}function _e(r,e,l){const s=new FormData;let a=!1,o="",t=null;const d=async()=>{var _,k;try{l(0,a=!0),s.append("title",o),s.append("img",t[0]),s.append("creator",(k=(_=U.authStore)==null?void 0:_.model)==null?void 0:k.id),await U.collection("plants").create(s),l(1,o=""),l(2,t=null),window.location.reload()}catch(C){alert((C==null?void 0:C.message)??"unknown error")}finally{l(0,a=!1)}};function p(){o=this.value,l(1,o)}function g(){t=this.files,l(2,t)}return[a,o,t,d,p,g]}class be extends ae{constructor(e){super(),ne(this,e,_e,me,le,{})}}function x(r,e,l){const s=r.slice();return s[12]=e[l],s}function ge(r){let e,l="Logout",s,a;return{c(){e=v("button"),e.textContent=l,this.h()},l(o){e=m(o,"BUTTON",{class:!0,"data-svelte-h":!0}),M(e)!=="svelte-q6oeko"&&(e.textContent=l),this.h()},h(){c(e,"class","button is-danger")},m(o,t){D(o,e,t),s||(a=j(e,"click",r[8]),s=!0)},p:Y,d(o){o&&h(e),s=!1,a()}}}function Ce(r){let e,l,s="login",a,o,t,d,p,g,_="password",k,C,u,n,i,T="enter",y,L;return{c(){e=v("div"),l=v("div"),l.textContent=s,a=P(),o=v("div"),t=v("input"),d=P(),p=v("div"),g=v("div"),g.textContent=_,k=P(),C=v("div"),u=v("input"),n=P(),i=v("button"),i.textContent=T,this.h()},l(E){e=m(E,"DIV",{class:!0});var b=V(e);l=m(b,"DIV",{class:!0,"data-svelte-h":!0}),M(l)!=="svelte-418dfo"&&(l.textContent=s),a=S(b),o=m(b,"DIV",{class:!0});var O=V(o);t=m(O,"INPUT",{class:!0,type:!0,placeholder:!0}),O.forEach(h),b.forEach(h),d=S(E),p=m(E,"DIV",{class:!0});var I=V(p);g=m(I,"DIV",{class:!0,"data-svelte-h":!0}),M(g)!=="svelte-kqazes"&&(g.textContent=_),k=S(I),C=m(I,"DIV",{class:!0});var w=V(C);u=m(w,"INPUT",{class:!0,type:!0,placeholder:!0}),w.forEach(h),I.forEach(h),n=S(E),i=m(E,"BUTTON",{class:!0,id:!0,"data-svelte-h":!0}),M(i)!=="svelte-mhue5a"&&(i.textContent=T),this.h()},h(){c(l,"class","label"),c(t,"class","input"),c(t,"type","text"),c(t,"placeholder","john"),c(o,"class","control"),c(e,"class","field"),c(g,"class","label"),c(u,"class","input"),c(u,"type","password"),c(u,"placeholder","Sup3r S3cr3T P4S5w0rd"),c(C,"class","control"),c(p,"class","field"),c(i,"class","button is-primary"),c(i,"id","login-button")},m(E,b){D(E,e,b),f(e,l),f(e,a),f(e,o),f(o,t),H(t,r[1]),D(E,d,b),D(E,p,b),f(p,g),f(p,k),f(p,C),f(C,u),H(u,r[2]),D(E,n,b),D(E,i,b),y||(L=[j(t,"input",r[6]),j(u,"input",r[7]),j(i,"click",r[5])],y=!0)},p(E,b){b&2&&t.value!==E[1]&&H(t,E[1]),b&4&&u.value!==E[2]&&H(u,E[2])},d(E){E&&(h(e),h(d),h(p),h(n),h(i)),y=!1,se(L)}}}function ee(r){let e,l,s=r[3].model.username+"",a,o,t,d,p,g,_;function k(n,i){return n[0].length===0?ye:ke}let C=k(r),u=C(r);return g=new be({}),{c(){e=v("p"),l=A("Logged as "),a=A(s),o=P(),u.c(),t=P(),d=v("hr"),p=P(),ue(g.$$.fragment)},l(n){e=m(n,"P",{});var i=V(e);l=R(i,"Logged as "),a=R(i,s),i.forEach(h),o=S(n),u.l(n),t=S(n),d=m(n,"HR",{}),p=S(n),fe(g.$$.fragment,n)},m(n,i){D(n,e,i),f(e,l),f(e,a),D(n,o,i),u.m(n,i),D(n,t,i),D(n,d,i),D(n,p,i),de(g,n,i),_=!0},p(n,i){(!_||i&8)&&s!==(s=n[3].model.username+"")&&K(a,s),C===(C=k(n))&&u?u.p(n,i):(u.d(1),u=C(n),u&&(u.c(),u.m(t.parentNode,t)))},i(n){_||(G(g.$$.fragment,n),_=!0)},o(n){J(g.$$.fragment,n),_=!1},d(n){n&&(h(e),h(o),h(t),h(d),h(p)),u.d(n),he(g,n)}}}function ke(r){let e,l=X(r[0]),s=[];for(let a=0;a<l.length;a+=1)s[a]=te(x(r,l,a));return{c(){e=v("div");for(let a=0;a<s.length;a+=1)s[a].c();this.h()},l(a){e=m(a,"DIV",{class:!0});var o=V(e);for(let t=0;t<s.length;t+=1)s[t].l(o);o.forEach(h),this.h()},h(){c(e,"class","column")},m(a,o){D(a,e,o);for(let t=0;t<s.length;t+=1)s[t]&&s[t].m(e,null)},p(a,o){if(o&9){l=X(a[0]);let t;for(t=0;t<l.length;t+=1){const d=x(a,l,t);s[t]?s[t].p(d,o):(s[t]=te(d),s[t].c(),s[t].m(e,null))}for(;t<s.length;t+=1)s[t].d(1);s.length=l.length}},d(a){a&&h(e),ve(s,a)}}}function ye(r){let e;return{c(){e=A("You don't have any plants yet")},l(l){e=R(l,"You don't have any plants yet")},m(l,s){D(l,e,s)},p:Y,d(l){l&&h(e)}}}function te(r){let e,l,s,a,o,t,d,p,g,_,k,C,u=r[3].model.username+"",n,i,T,y,L="View fully",E,b,O;function I(){return r[9](r[12])}return{c(){e=v("div"),l=v("div"),s=v("div"),a=v("div"),o=v("figure"),t=v("img"),g=P(),_=v("div"),k=v("p"),C=A("This gorgeous plant belongs to "),n=A(u),i=A(`! Click the button to see
											more about it`),T=P(),y=v("button"),y.textContent=L,E=P(),this.h()},l(w){e=m(w,"DIV",{class:!0});var N=V(e);l=m(N,"DIV",{class:!0});var q=V(l);s=m(q,"DIV",{class:!0});var F=V(s);a=m(F,"DIV",{class:!0});var B=V(a);o=m(B,"FIGURE",{class:!0});var W=V(o);t=m(W,"IMG",{src:!0,alt:!0}),W.forEach(h),B.forEach(h),g=S(F),_=m(F,"DIV",{class:!0});var $=V(_);k=m($,"P",{class:!0});var z=V(k);C=R(z,"This gorgeous plant belongs to "),n=R(z,u),i=R(z,`! Click the button to see
											more about it`),z.forEach(h),T=S($),y=m($,"BUTTON",{class:!0,"data-svelte-h":!0}),M(y)!=="svelte-13bvaoe"&&(y.textContent=L),$.forEach(h),F.forEach(h),q.forEach(h),E=S(N),N.forEach(h),this.h()},h(){Q(t.src,d=U.files.getUrl(r[12],r[12].img))||c(t,"src",d),c(t,"alt",p=r[12].id),c(o,"class","image"),c(a,"class","media-left"),c(k,"class","title is-4"),c(y,"class","button is-primary"),c(_,"class","content"),c(s,"class","media"),c(l,"class","card-content"),c(e,"class","card")},m(w,N){D(w,e,N),f(e,l),f(l,s),f(s,a),f(a,o),f(o,t),f(s,g),f(s,_),f(_,k),f(k,C),f(k,n),f(k,i),f(_,T),f(_,y),f(e,E),b||(O=j(y,"click",I),b=!0)},p(w,N){r=w,N&1&&!Q(t.src,d=U.files.getUrl(r[12],r[12].img))&&c(t,"src",d),N&1&&p!==(p=r[12].id)&&c(t,"alt",p),N&8&&u!==(u=r[3].model.username+"")&&K(n,u)},d(w){w&&h(e),b=!1,O()}}}function we(r){let e,l,s,a="Plants",o,t,d=`welcome to the world of plants! you can safely and securely store your plants here and share
			them with your friends.`,p,g,_;function k(i,T){return i[3].isValid?ge:Ce}let C=k(r),u=C(r),n=r[3].isValid&&ee(r);return{c(){e=v("section"),l=v("div"),s=v("p"),s.textContent=a,o=P(),t=v("p"),t.textContent=d,p=P(),u.c(),g=P(),n&&n.c(),this.h()},l(i){e=m(i,"SECTION",{class:!0});var T=V(e);l=m(T,"DIV",{class:!0});var y=V(l);s=m(y,"P",{class:!0,"data-svelte-h":!0}),M(s)!=="svelte-p22bdd"&&(s.textContent=a),o=S(y),t=m(y,"P",{class:!0,"data-svelte-h":!0}),M(t)!=="svelte-1y1xkjt"&&(t.textContent=d),p=S(y),u.l(y),g=S(y),n&&n.l(y),y.forEach(h),T.forEach(h),this.h()},h(){c(s,"class","title"),c(t,"class","subtitle"),c(l,"class","hero-body"),c(e,"class","hero")},m(i,T){D(i,e,T),f(e,l),f(l,s),f(l,o),f(l,t),f(l,p),u.m(l,null),f(l,g),n&&n.m(l,null),_=!0},p(i,[T]){C===(C=k(i))&&u?u.p(i,T):(u.d(1),u=C(i),u&&(u.c(),u.m(l,g))),i[3].isValid?n?(n.p(i,T),T&8&&G(n,1)):(n=ee(i),n.c(),G(n,1),n.m(l,null)):n&&(pe(),J(n,1,1,()=>{n=null}),ce())},i(i){_||(G(n),_=!0)},o(i){J(n),_=!1},d(i){i&&h(e),u.d(),n&&n.d()}}}function Ee(r,e,l){let s,a=[],o="",t="";const d=ie("user");oe(r,d,i=>l(3,s=i));const p=async()=>{const i=await U.collection("plants").getFullList({sort:"-created"});l(0,a=i)},g=async()=>{if(U.authStore.isValid)try{await U.collection("users").authRefresh()}catch{U.authStore.clear(),d.set(U.authStore)}d.subscribe(()=>{p()})},_=async()=>{try{try{await U.collection("users").create({username:o,password:t,passwordConfirm:t})}catch{}await U.collection("users").authWithPassword(o,t),document.cookie=U.authStore.exportToCookie(),d.set(U.authStore),l(1,o=""),l(2,t="")}catch{alert("Wrong auth / Too simple password / Wrong username")}};re(g);function k(){o=this.value,l(1,o)}function C(){t=this.value,l(2,t)}return[a,o,t,s,d,_,k,C,()=>{U.authStore.clear(),d.set(U.authStore)},i=>{window.location=`/view-plant?id=${i.id}`}]}class De extends ae{constructor(e){super(),ne(this,e,Ee,we,le,{})}}export{De as component};
