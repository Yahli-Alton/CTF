import{s as O,n as I,o as P,b as U,r as z}from"../chunks/scheduler.DNLc2kpi.js";import{S as N,i as R,e as v,s as C,a as V,c as m,g as M,b as H,d as t,f as b,h,j as D,k as L,l as _,m as S,p as q}from"../chunks/index.DtWLoelg.js";import{p as j}from"../chunks/index.D3UwJtMw.js";function A(c){let e,l,a,d="Share it with your friend",o,r,f='<div>Loading...</div> <div class="loader"></div>',p,i,s,n,u,g="Inappropriate content? Report",k,x;return{c(){e=v("div"),l=v("div"),a=v("button"),a.textContent=d,o=C(),r=v("div"),r.innerHTML=f,p=C(),i=v("div"),s=C(),n=v("div"),u=v("a"),u.textContent=g,this.h()},l(y){e=m(y,"DIV",{class:!0});var T=D(e);l=m(T,"DIV",{class:!0});var w=D(l);a=m(w,"BUTTON",{class:!0,"data-svelte-h":!0}),M(a)!=="svelte-1wrifyx"&&(a.textContent=d),o=H(w),r=m(w,"DIV",{class:!0,style:!0,"data-svelte-h":!0}),M(r)!=="svelte-1ndpipd"&&(r.innerHTML=f),p=H(w),i=m(w,"DIV",{style:!0}),D(i).forEach(h),s=H(w),n=m(w,"DIV",{class:!0,style:!0});var E=D(n);u=m(E,"A",{href:!0,"data-svelte-h":!0}),M(u)!=="svelte-1l2a1kf"&&(u.textContent=g),E.forEach(h),w.forEach(h),T.forEach(h),this.h()},h(){L(a,"class","button is-link"),L(r,"class","title"),t(r,"display","flex"),t(r,"justify-content","space-around"),t(i,"background-size","contain"),t(i,"background-repeat","no-repeat"),t(i,"background-image","url('"+j.files.getUrl(c[0],c[0].img)+"') "),t(i,"height","50vh"),t(i,"display","flex"),t(i,"justify-content","center"),t(i,"align-items","center"),t(i,"overflow","auto"),L(u,"href","report"),L(n,"class","footer"),t(n,"display","flex"),t(n,"justify-content","space-around"),t(n,"bottom","0"),t(n,"left","0"),t(n,"position","fixed"),t(n,"width","100vw"),L(l,"class","hero-body"),L(e,"class","hero")},m(y,T){b(y,e,T),_(e,l),_(l,a),_(l,o),_(l,r),c[4](r),_(l,p),_(l,i),_(l,s),_(l,n),_(n,u),k||(x=[S(a,"click",c[3]),S(u,"click",q(c[5]))],k=!0)},p(y,T){T&1&&t(i,"background-image","url('"+j.files.getUrl(y[0],y[0].img)+"') ")},d(y){y&&h(e),c[4](null),k=!1,z(x)}}}function B(c){let e,l='<div class="loader"></div>';return{c(){e=v("div"),e.innerHTML=l,this.h()},l(a){e=m(a,"DIV",{style:!0,"data-svelte-h":!0}),M(e)!=="svelte-1tw1isv"&&(e.innerHTML=l),this.h()},h(){t(e,"display","flex"),t(e,"justify-content","center"),t(e,"align-items","center"),t(e,"height","100vh"),t(e,"width","100vw"),t(e,"position","fixed"),t(e,"top","0"),t(e,"left","0")},m(a,d){b(a,e,d)},p:I,d(a){a&&h(e)}}}function J(c){let e,l='<a href="/">back</a>',a,d,o,r;function f(s,n){return s[1]?B:A}let p=f(c),i=p(c);return{c(){e=v("div"),e.innerHTML=l,a=C(),d=v("hr"),o=C(),i.c(),r=V(),this.h()},l(s){e=m(s,"DIV",{style:!0,"data-svelte-h":!0}),M(e)!=="svelte-13awhfs"&&(e.innerHTML=l),a=H(s),d=m(s,"HR",{}),o=H(s),i.l(s),r=V(),this.h()},h(){t(e,"padding","1rem"),t(e,"display","flex"),t(e,"justify-content","space-between"),t(e,"align-items","center")},m(s,n){b(s,e,n),b(s,a,n),b(s,d,n),b(s,o,n),i.m(s,n),b(s,r,n)},p(s,[n]){p===(p=f(s))&&i?i.p(s,n):(i.d(1),i=p(s),i&&(i.c(),i.m(r.parentNode,r)))},i:I,o:I,d(s){s&&(h(e),h(a),h(d),h(o),h(r)),i.d(s)}}}function F(c,e,l){let a=["window","document","cookie","fetch","navigator","sendbeacon","+","_","script","!",'"',"#","%","'","(",")","*","+",",","-","/",":","?","@","[","]",";"],d=null,o=null,r=!0,f;P(async()=>{d=new URLSearchParams(window.location.search).get("id");try{l(0,o=await j.collection("plants").getOne(d))}catch{window.location.href="/"}finally{l(1,r=!1)}setTimeout(()=>{const u=DOMPurify.sanitize(o.title),g=document.createElement("div");g.classList.add("title"),g.innerHTML=u;const k=g.innerText;try{if(a.some(x=>k.toLowerCase().includes(x)))throw new Error("not safe!!!");l(2,f.innerHTML=k,f)}catch{window.location.href="/"}},100)});const p=async()=>{await navigator.share({url:window.location.href})};function i(n){U[n?"unshift":"push"](()=>{f=n,l(2,f)})}return[o,r,f,p,i,async()=>{(await fetch("/report",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:o.id})})).ok?alert("reported"):alert("error")}]}class W extends N{constructor(e){super(),R(this,e,F,J,O,{})}}export{W as component};
